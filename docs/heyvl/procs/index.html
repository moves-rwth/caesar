<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-heyvl/procs" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Procedures | Caesar</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.caesarverifier.org/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://www.caesarverifier.org/img/social-card.png"><meta data-rh="true" property="og:url" content="https://www.caesarverifier.org/docs/heyvl/procs"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Procedures | Caesar"><meta data-rh="true" name="description" content="Procedures are HeyVL&#x27;s logical units of code."><meta data-rh="true" property="og:description" content="Procedures are HeyVL&#x27;s logical units of code."><link data-rh="true" rel="icon" href="/img/laurel-square.svg"><link data-rh="true" rel="canonical" href="https://www.caesarverifier.org/docs/heyvl/procs"><link data-rh="true" rel="alternate" href="https://www.caesarverifier.org/docs/heyvl/procs" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.caesarverifier.org/docs/heyvl/procs" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q93W1TPDIE-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Caesar RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Caesar Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-73RDXJSM5X"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-73RDXJSM5X",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Caesar" href="/opensearch.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.57f36cd1.css">
<script src="/assets/js/runtime~main.41234fec.js" defer="defer"></script>
<script src="/assets/js/main.baea39e3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/laurel.svg" alt="Caesar Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/laurel.svg" alt="Caesar Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Caesar</b></a><a class="navbar__item navbar__link" href="/docs/getting-started">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/blog">News</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/moves-rwth/caesar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/docs/publications">Publications</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/getting-started/">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/heyvl/">HeyVL</a><button aria-label="Collapse sidebar category &#x27;HeyVL&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/heyvl/procs">Procedures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/heyvl/statements">Statements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/heyvl/expressions">Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/heyvl/domains">Domains, Uninterpreted Functions, and Axioms</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/stdlib/">Standard Library</a><button aria-label="Expand sidebar category &#x27;Standard Library&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/proof-rules/">Proof Rules</a><button aria-label="Expand sidebar category &#x27;Proof Rules&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/caesar/">The Caesar Tool</a><button aria-label="Expand sidebar category &#x27;The Caesar Tool&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/model-checking">Model Checking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/devguide">Development Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/publications">Publications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/OOPSLA_AEC">OOPSLA &#x27;23 Artifact Evaluation Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/pgcl">pgcl2heyvl Frontend</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/heyvl/"><span itemprop="name">HeyVL</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Procedures</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Procedures and Coprocedures</h1></header>
<p>HeyVL <a href="/docs/heyvl/statements">statements</a> are placed inside the body of <em>(co)procedures</em> or <em>(co)procs</em> for short.
A <em>procedure</em> has a name, a list of parameters, a list of return values, and a list of specification attributes.
Caesar tries to verify each procedure in the given HeyVL files using the specification.
<em>Coprocedures</em> are like procedures, but the specification is interpreted differently (see below).</p>
<p>Procedures can be <a href="#calling-procedures">called inside other procedures</a>.
This enables modular reasoning about code: Prove that some code satisfies the specification once, and then use the specification when at the call site - without reasoning about the procedure&#x27;s body again.</p>
<p>There are also <a href="#procs-without-body">procedures without an associated body</a>.
They are not verified by Caesar, but can be called inside other procedures.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="procs-by-example-increment-with-50-probability">Procs by Example: Increment With 50% Probability<a href="#procs-by-example-increment-with-50-probability" class="hash-link" aria-label="Direct link to Procs by Example: Increment With 50% Probability" title="Direct link to Procs by Example: Increment With 50% Probability">​</a></h2>
<p>The following procedure named <code>maybe_increment</code> increments the value of the input parameter <code>init_x</code> by one with probability 50% and leaves it unchanged with 50% probability, returning the result in output parameter <code>x</code>.</p>
<div class="language-heyvl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-heyvl codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">proc</span><span class="token plain"> maybe_increment(init_x: </span><span class="token builtin" style="color:rgb(72, 118, 214)">UInt</span><span class="token plain">) </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> (x: </span><span class="token builtin" style="color:rgb(72, 118, 214)">UInt</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">pre</span><span class="token plain"> init_x </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0.5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">post</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    x </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> init_x</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">var</span><span class="token plain"> prob_choice: </span><span class="token builtin" style="color:rgb(72, 118, 214)">Bool</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> flip(</span><span class="token number" style="color:rgb(170, 9, 130)">0.5</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> prob_choice </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        x </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Verifying this proc checks the following equation:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><munder><mrow><mrow><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">t</mi><mi mathvariant="monospace">_</mi><mi mathvariant="monospace">x</mi></mrow><mo>+</mo><mn>0.5</mn></mrow><mo stretchy="true">⏟</mo></munder><mtext mathvariant="monospace">pre</mtext></munder><mspace width="1em"></mspace><munder><munder><mo lspace="0em" rspace="0em">≤</mo><mo stretchy="true">⏟</mo></munder><mtext mathvariant="monospace">proc</mtext></munder><mspace width="1em"></mspace><munder><munder><mi mathvariant="double-struck">E</mi><mo stretchy="true">⏟</mo></munder><mtext>body</mtext></munder><mo stretchy="false">(</mo><munder><munder><mi mathvariant="monospace">x</mi><mo stretchy="true">⏟</mo></munder><mtext mathvariant="monospace">post</mtext></munder><mo stretchy="false">)</mo><mtext> </mtext><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">    \underbrace{\mathtt{init\_x} + 0.5}_\texttt{pre} \quad\underbrace{\leq}_\texttt{proc}\quad \underbrace{\mathbb{E}}_\text{body}(\underbrace{\mathtt{x}}_\texttt{post})~.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.2202em;vertical-align:-1.4702em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em"><span style="top:-1.7555em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord texttt mtight">pre</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em"><span class="svg-align" style="top:-2.2569em"><span class="pstrut" style="height:3em"></span><span class="stretchy" style="height:0.548em;min-width:1.6em"><span class="brace-left" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"></path></svg></span><span class="brace-center" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"></path></svg></span><span class="brace-right" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"></path></svg></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathtt">init_x</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">0.5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7431em"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4001em"><span></span></span></span></span></span><span class="mspace" style="margin-right:1em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.636em"><span style="top:-1.7146em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord texttt mtight">proc</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.636em"><span class="svg-align" style="top:-2.216em"><span class="pstrut" style="height:3em"></span><span class="stretchy" style="height:0.548em;min-width:1.6em"><span class="brace-left" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"></path></svg></span><span class="brace-center" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"></path></svg></span><span class="brace-right" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"></path></svg></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mrel">≤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.784em"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4409em"><span></span></span></span></span></span><span class="mspace" style="margin-right:1em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6889em"><span style="top:-1.6659em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">body</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6889em"><span class="svg-align" style="top:-2.352em"><span class="pstrut" style="height:3em"></span><span class="stretchy" style="height:0.548em;min-width:1.6em"><span class="brace-left" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"></path></svg></span><span class="brace-center" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"></path></svg></span><span class="brace-right" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"></path></svg></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathbb">E</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4702em"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em"><span style="top:-1.7645em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord texttt mtight">post</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em"><span class="svg-align" style="top:-2.352em"><span class="pstrut" style="height:3em"></span><span class="stretchy" style="height:0.548em;min-width:1.6em"><span class="brace-left" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"></path></svg></span><span class="brace-center" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"></path></svg></span><span class="brace-right" style="height:0.548em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"></path></svg></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathtt">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3911em"><span></span></span></span></span></span><span class="mclose">)</span><span class="mspace nobreak"> </span><span class="mord">.</span></span></span></span></span>
<p>Let us decompose the example into its parts:</p>
<ol>
<li><strong>Keyword <code>proc</code></strong>: We verify that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">t</mi><mi mathvariant="monospace">_</mi><mi mathvariant="monospace">x</mi></mrow><mo>+</mo><mn>0.5</mn><mo>≤</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi mathvariant="monospace">x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathtt{init\_x} + 0.5 \leq \mathbb{E}(\mathtt{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7063em;vertical-align:-0.0951em"></span><span class="mord"><span class="mord mathtt">init_x</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em"></span><span class="mord">0.5</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathtt">x</span><span class="mclose">)</span></span></span></span> holds, i.e. the expected value of <code>x</code> after executing <code>maybe_increment</code> is at least <code>init_x + 0.5</code>.<!-- -->
<ul>
<li>If we used the <code>coproc</code> keyword instead, we would verify <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">t</mi><mi mathvariant="monospace">_</mi><mi mathvariant="monospace">x</mi></mrow><mo>+</mo><mn>0.5</mn><mo>≥</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi mathvariant="monospace">x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathtt{init\_x} + 0.5 \geq \mathbb{E}(\mathtt{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7063em;vertical-align:-0.0951em"></span><span class="mord"><span class="mord mathtt">init_x</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em"></span><span class="mord">0.5</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathtt">x</span><span class="mclose">)</span></span></span></span> (<em>upper</em> instead of <em>lower</em> bounds).</li>
</ul>
</li>
<li>We have one <strong>input parameter</strong> <code>init_x</code> of type <a href="/docs/stdlib/numbers#uint"><code>UInt</code></a>.<!-- -->
<ul>
<li>Input parameters may not be modified in the program.</li>
</ul>
</li>
<li>We have one <strong>output parameter</strong> <code>x</code> of type <a href="/docs/stdlib/numbers#uint"><code>UInt</code></a>.<!-- -->
<ul>
<li>There may be multiple parameters (input and output), which can be separated by commas (e.g. <code>init_x: UInt, init_y: UInt</code>).</li>
</ul>
</li>
<li>The <code>pre</code> declares the <strong>pre-expectation</strong> <code>init_x + 0.5</code>. It is evaluated in the <em>initial state</em> (when calling the proc). This is why it is called &quot;pre&quot; (= before running the proc).<!-- -->
<ul>
<li>The <code>pre</code> is an expression of type <a href="/docs/stdlib/numbers#eureal"><code>EUReal</code></a> over the input parameters.</li>
</ul>
</li>
<li>The <code>post</code> is the <strong>post-expectation</strong> <code>x</code> and evaluated in the final states of the proc (post = after running the proc). We always compare its expected value against the pre.<!-- -->
<ul>
<li>The <code>post</code> is an expression of type <a href="/docs/stdlib/numbers#eureal"><code>EUReal</code></a> over the input and output parameters.</li>
</ul>
</li>
<li>The <strong>body of the proc</strong> assigns <code>init_x</code> to <code>x</code>. We then do a <a href="/docs/stdlib/distributions#symbolic-with-probabilities">probabilistic coin flip</a> and assign <code>true</code> to <code>prob_choice</code> with probability <code>0.5</code> (and <code>false</code> with probability <code>0.5</code>). It determines the expected value (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi></mrow><annotation encoding="application/x-tex">\mathbb{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em"></span><span class="mord mathbb">E</span></span></span></span>) we look at.<!-- -->
<ul>
<li>See <a href="/docs/heyvl/statements">documentation on statements</a> for more information.</li>
<li><a href="#procs-without-body">The body is optional</a>.</li>
</ul>
</li>
</ol>
<p>Different specifications yield different results.
Remember that we have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi mathvariant="monospace">x</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">t</mi><mi mathvariant="monospace">_</mi><mi mathvariant="monospace">x</mi></mrow><mo>+</mo><mn>0.5</mn></mrow><annotation encoding="application/x-tex">\mathbb{E}(\mathtt{x}) = \mathtt{init\_x} + 0.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathtt">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7063em;vertical-align:-0.0951em"></span><span class="mord"><span class="mord mathtt">init_x</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0.5</span></span></span></span>.</p>
<table><thead><tr><th>Kind</th><th>Pre</th><th>Post</th><th>Verifies?</th><th>Explanation</th></tr></thead><tbody><tr><td><code>proc</code></td><td><code>init_x + 0.4</code></td><td><code>x</code></td><td>Yes</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">t</mi><mi mathvariant="monospace">_</mi><mi mathvariant="monospace">x</mi></mrow><mo>+</mo><mn>0.4</mn><mo>≤</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi mathvariant="monospace">x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathtt{init\_x} + 0.4 \leq \mathbb{E}(\mathtt{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7063em;vertical-align:-0.0951em"></span><span class="mord"><span class="mord mathtt">init_x</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em"></span><span class="mord">0.4</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathtt">x</span><span class="mclose">)</span></span></span></span>.</td></tr><tr><td><code>proc</code></td><td><code>init_x + 0.6</code></td><td><code>x</code></td><td>No</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">t</mi><mi mathvariant="monospace">_</mi><mi mathvariant="monospace">x</mi></mrow><mo>+</mo><mn>0.6</mn><mo>≰</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi mathvariant="monospace">x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathtt{init\_x} + 0.6 \not\leq \mathbb{E}(\mathtt{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7063em;vertical-align:-0.0951em"></span><span class="mord"><span class="mord mathtt">init_x</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord">0.6</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathtt">x</span><span class="mclose">)</span></span></span></span>.</td></tr><tr><td><code>coproc</code></td><td><code>init_x + 0.6</code></td><td><code>x</code></td><td>Yes</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">t</mi><mi mathvariant="monospace">_</mi><mi mathvariant="monospace">x</mi></mrow><mo>+</mo><mn>0.6</mn><mo>≥</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi mathvariant="monospace">x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathtt{init\_x} + 0.6 \geq \mathbb{E}(\mathtt{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7063em;vertical-align:-0.0951em"></span><span class="mord"><span class="mord mathtt">init_x</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em"></span><span class="mord">0.6</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathtt">x</span><span class="mclose">)</span></span></span></span>.</td></tr><tr><td><code>coproc</code></td><td><code>init_x + 0.4</code></td><td><code>x</code></td><td>No</td><td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">n</mi><mi mathvariant="monospace">i</mi><mi mathvariant="monospace">t</mi><mi mathvariant="monospace">_</mi><mi mathvariant="monospace">x</mi></mrow><mo>+</mo><mn>0.4</mn><mo>≱</mo><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi mathvariant="monospace">x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathtt{init\_x} + 0.4 \not\geq \mathbb{E}(\mathtt{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7063em;vertical-align:-0.0951em"></span><span class="mord"><span class="mord mathtt">init_x</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord">0.4</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathtt">x</span><span class="mclose">)</span></span></span></span>.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="writing-specifications">Writing Specifications<a href="#writing-specifications" class="hash-link" aria-label="Direct link to Writing Specifications" title="Direct link to Writing Specifications">​</a></h2>
<p>The specifications in HeyVL follow the <em>probabilistic predicate transformer</em> paradigm.
Caesar transforms a <em>post</em> backwards through the program to compute its expected value.
The result is then checked against the <em>pre</em>, for each possible initial state.</p>
<p>There is an inductive definition on the <a href="/docs/heyvl/statements">statements documentation page</a> for the <em>verification pre-expectation transformer</em> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">v</mi><mi mathvariant="normal">p</mi></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">⟦</mo><mrow></mrow><mi>S</mi><mo mathvariant="normal" lspace="0em" rspace="0em">⟧</mo><mo stretchy="false">(</mo><mi>φ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{vp}\llbracket{}S\rrbracket(\varphi)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathrm">vp</span></span><span class="mopen"><span class="mopen">[</span><span class="mspace" style="margin-right:-0.1778em"></span><span class="mopen">[</span></span><span class="mord"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mclose"><span class="mclose">]</span><span class="mspace" style="margin-right:-0.1778em"></span><span class="mclose">]</span></span><span class="mopen">(</span><span class="mord mathnormal">φ</span><span class="mclose">)</span></span></span></span> that Caesar uses to compute the expected value of the post <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>φ</mi></mrow><annotation encoding="application/x-tex">\varphi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">φ</span></span></span></span> after running statements <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span>.
However, for now it is sufficient to think of expected values as they intuitively are.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-specification-type-eureal-for-quantitative-reasoning">The Specification Type: <code>EUReal</code> for Quantitative Reasoning<a href="#the-specification-type-eureal-for-quantitative-reasoning" class="hash-link" aria-label="Direct link to the-specification-type-eureal-for-quantitative-reasoning" title="Direct link to the-specification-type-eureal-for-quantitative-reasoning">​</a></h3>
<p>In HeyVL, the <code>pre</code> and <code>post</code> expressions have type <a href="/docs/stdlib/numbers#eureal"><code>EUReal</code></a>, i.e. non-negative real numbers or infinity.
We have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">EUReal</mtext><mo>=</mo><mo stretchy="false">{</mo><mtext> </mtext><mi>x</mi><mo>∈</mo><mi mathvariant="double-struck">R</mi><mo>∣</mo><mi>x</mi><mo>≥</mo><mn>0</mn><mtext> </mtext><mo stretchy="false">}</mo><mo>∪</mo><mo stretchy="false">{</mo><mtext> </mtext><mi mathvariant="normal">∞</mi><mtext> </mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\texttt{EUReal} = \set{ x \in \mathbb{R} \mid x \geq 0 } \cup \set{ \infty }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6111em"></span><span class="mord text"><span class="mord texttt">EUReal</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">{</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">R</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">{</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">∞</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mclose">}</span></span></span></span>.</p>
<p>This allows us to reason about various kinds expected values of probabilistic programs.
However, all of these expected values are limited to non-negative values.
This is seldom a practical limitation.<sup><a href="#user-content-fn-on-negative-numbers" id="user-content-fnref-on-negative-numbers" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></p>
<p>HeyVL supports the syntax of the <a href="https://doi.org/10.1145/3434320" target="_blank" rel="noopener noreferrer"><em>relatively complete assertion language</em> by Batz et al</a>.
This means we can express practically all expected values of interest in our syntax.
For more information, read the <a href="/docs/heyvl/expressions#relative-completeness">Caesar documentation on relative completeness</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="embedding-boolean-specifications">Embedding Boolean Specifications<a href="#embedding-boolean-specifications" class="hash-link" aria-label="Direct link to Embedding Boolean Specifications" title="Direct link to Embedding Boolean Specifications">​</a></h3>
<p>The <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">v</mi><mi mathvariant="normal">p</mi></mrow><annotation encoding="application/x-tex">\mathrm{vp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathrm">vp</span></span></span></span></span> semantics of HeyVL is a generalization of classical (Boolean) predicate transformer reasonining as found in verifiers such as <a href="https://dafny.org/" target="_blank" rel="noopener noreferrer">Dafny</a>.
The Boolean reasoning can be fully embedded into our quantitative setting.</p>
<p>The <a href="/docs/heyvl/expressions"><em>embed expression</em></a> <code>?(b)</code> takes a Boolean expression <code>b</code> and maps it to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord">∞</span></span></span></span> if <code>b</code> evaluates to true in the current state.
Otherwise, <code>?(b)</code> evaluates to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span>.</p>
<p>The following procedure named <code>forty_two</code> accepts a single parameter, <code>x</code> of type <code>UInt</code> and returns a value <code>y</code> of type <code>UInt</code>.
The procedure has a body with just a single assignment statement that increments <code>x</code> by 1 and saves the result in <code>y</code>.</p>
<div class="language-heyvl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-heyvl codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">proc</span><span class="token plain"> forty_two(x: </span><span class="token builtin" style="color:rgb(72, 118, 214)">UInt</span><span class="token plain">) </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> (y: </span><span class="token builtin" style="color:rgb(72, 118, 214)">UInt</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">pre</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token plain">(x </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">41</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">post</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token plain">(y </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">42</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    y </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(12, 150, 155)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>proc</code> verifies that <code>y == 42</code> holds after all executions (<code>post</code>) when we started in a state that satisfied <code>x == 41</code> (<code>pre</code>).</p>
<p>Why do the semantics work out so neatly?
Let&#x27;s examine the semantics manually to see how it works.
Recall that the <a href="/docs/heyvl/statements#semantics">verification pre-expectation transformer</a> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">v</mi><mi mathvariant="normal">p</mi></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">⟦</mo><mi>S</mi><mo mathvariant="normal" lspace="0em" rspace="0em">⟧</mo><mo stretchy="false">(</mo><mi>φ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{vp}\llbracket{S}\rrbracket(\varphi)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathrm">vp</span></span><span class="mopen"><span class="mopen">[</span><span class="mspace" style="margin-right:-0.1778em"></span><span class="mopen">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span><span class="mclose"><span class="mclose">]</span><span class="mspace" style="margin-right:-0.1778em"></span><span class="mclose">]</span></span><span class="mopen">(</span><span class="mord mathnormal">φ</span><span class="mclose">)</span></span></span></span> in effect computes the expected value <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mo stretchy="false">(</mo><mi>φ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{E}(\varphi)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathbb">E</span><span class="mopen">(</span><span class="mord mathnormal">φ</span><span class="mclose">)</span></span></span></span> of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>φ</mi></mrow><annotation encoding="application/x-tex">\varphi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">φ</span></span></span></span> after running statement <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span>.</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left right left" columnspacing="0em 1em 0em"><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">?</mo><mo stretchy="false">(</mo><mrow><mi>x</mi><mo>=</mo><mn>41</mn></mrow><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace><mo>≤</mo><mspace width="1em"></mspace><mrow><mi mathvariant="normal">v</mi><mi mathvariant="normal">p</mi></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">⟦</mo><mi>S</mi><mo mathvariant="normal" lspace="0em" rspace="0em">⟧</mo><mo stretchy="false">(</mo><mo stretchy="false">?</mo><mo stretchy="false">(</mo><mrow><mi>y</mi><mo>=</mo><mn>42</mn></mrow><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>iff</mtext><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mo stretchy="false">?</mo><mo stretchy="false">(</mo><mrow><mi>x</mi><mo>=</mo><mn>41</mn></mrow><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace><mo>≤</mo><mspace width="1em"></mspace><mo stretchy="false">?</mo><mo stretchy="false">(</mo><mrow><mi>y</mi><mo>=</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mpadded lspace="-0.5width" width="0px"><mrow><mtext>Assume </mtext><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi><mo>=</mo><mn>41</mn></mstyle><mtext> holds, then we have </mtext><mstyle scriptlevel="0" displaystyle="false"><mo stretchy="false">?</mo><mo stretchy="false">(</mo><mrow><mi>x</mi><mo>=</mo><mn>41</mn></mrow><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∞</mi></mstyle><mtext> and thus:</mtext></mrow></mpadded></mstyle></mtd></mtr><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>iff</mtext><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mi mathvariant="normal">∞</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace><mo>≤</mo><mspace width="1em"></mspace><mo stretchy="false">?</mo><mo stretchy="false">(</mo><mrow><mi>y</mi><mo>=</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>iff</mtext><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mi mathvariant="normal">∞</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace><mo>=</mo><mspace width="1em"></mspace><mo stretchy="false">?</mo><mo stretchy="false">(</mo><mrow><mi>y</mi><mo>=</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>iff</mtext><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mpadded lspace="-0.5width" width="0px"><mtext>y = x + 1</mtext></mpadded></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>iff</mtext><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mpadded lspace="-0.5width" width="0px"><mtext>y = 42</mtext></mpadded></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mpadded lspace="-0.5width" width="0px"><mrow><mtext>Assume </mtext><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi><mo>=</mo><mn>41</mn></mstyle><mtext> does not hold, then we have </mtext><mstyle scriptlevel="0" displaystyle="false"><mo stretchy="false">?</mo><mo stretchy="false">(</mo><mrow><mi>x</mi><mo>=</mo><mn>41</mn></mrow><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mstyle><mtext> and thus:</mtext></mrow></mpadded></mstyle></mtd></mtr><mtr><mtd class="mtr-glue"></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>iff</mtext><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"></mspace><mo>≤</mo><mspace width="1em"></mspace><mo stretchy="false">?</mo><mo stretchy="false">(</mo><mrow><mi>y</mi><mo>=</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd class="mtr-glue"></mtd><mtd class="mml-eqn-num"></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>iff</mtext><mspace width="1em"></mspace></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi mathvariant="normal">t</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">e</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\newcommand{\embed}[1]{\mathrm{?}({#1})}
\begin{align*}
    &amp;&amp; \embed{x = 41} &amp;\quad\leq\quad \mathrm{vp}\llbracket{S}\rrbracket(\embed{y = 42}) \tag{the specification} \\
    \text{iff}\quad &amp;&amp; \embed{x = 41} &amp;\quad\leq\quad \embed{y = x + 1} \tag{$\mathrm{vp}$ semantics} \\
    \clap{\text{Assume $x = 41$ holds, then we have $\embed{x = 41} = \infty$ and thus:}} \\
    \text{iff}\quad &amp;&amp; \infty &amp;\quad\leq\quad \embed{y = x + 1} \tag{$\mathrm{vp}$ semantics} \\
    \text{iff}\quad &amp;&amp; \infty &amp;\quad=\quad \embed{y = x + 1} \tag{$\embed{b} \in \set{0, \infty}$} \\
    \text{iff}\quad &amp;&amp; \clap{y = x + 1} \tag{$\mathrm{vp}$ semantics} \\
    \text{iff}\quad &amp;&amp; \clap{y = 42} \tag{assumption $x = 41$} \\
    \clap{\text{Assume $x = 41$ does not hold, then we have $\embed{x = 41} = 0$ and thus:}} \\
    \text{iff}\quad &amp;&amp; 0 &amp;\quad\leq\quad \embed{y = x + 1} \tag{$\mathrm{vp}$ semantics} \\
    \text{iff}\quad &amp;&amp; \mathrm{true}
\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:15em;vertical-align:-7.25em"></span><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.75em"><span style="top:-9.91em"><span class="pstrut" style="height:3em"></span><span class="mord"></span></span><span style="top:-8.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">iff</span></span><span class="mspace" style="margin-right:1em"></span></span></span><span style="top:-6.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord vbox"><span class="thinbox"><span class="clap"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="inner"><span><span class="mord"><span class="mord text"><span class="mord text"><span class="mord textrm">Assume </span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">41</span><span class="mord textrm"> holds, then we have </span><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">41</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">∞</span><span class="mord textrm"> and thus:</span></span></span></span></span></span><span class="fix"></span></span></span></span></span></span><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">iff</span></span><span class="mspace" style="margin-right:1em"></span></span></span><span style="top:-3.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">iff</span></span><span class="mspace" style="margin-right:1em"></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">iff</span></span><span class="mspace" style="margin-right:1em"></span></span></span><span style="top:-0.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">iff</span></span><span class="mspace" style="margin-right:1em"></span></span></span><span style="top:0.59em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord vbox"><span class="thinbox"><span class="clap"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="inner"><span><span class="mord"><span class="mord text"><span class="mord text"><span class="mord textrm">Assume </span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">41</span><span class="mord textrm"> does not hold, then we have </span><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">41</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">0</span><span class="mord textrm"> and thus:</span></span></span></span></span></span><span class="fix"></span></span></span></span></span></span><span style="top:2.09em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">iff</span></span><span class="mspace" style="margin-right:1em"></span></span></span><span style="top:3.59em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">iff</span></span><span class="mspace" style="margin-right:1em"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.25em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.75em"><span style="top:-9.75em"><span class="pstrut" style="height:2.84em"></span><span class="mord"><span class="mord"></span></span></span><span style="top:-8.25em"><span class="pstrut" style="height:2.84em"></span><span class="mord"><span class="mord"></span></span></span><span style="top:-5.25em"><span class="pstrut" style="height:2.84em"></span><span class="mord"><span class="mord"></span></span></span><span style="top:-3.75em"><span class="pstrut" style="height:2.84em"></span><span class="mord"><span class="mord"></span></span></span><span style="top:-2.25em"><span class="pstrut" style="height:2.84em"></span><span class="mord"><span class="mord"></span></span></span><span style="top:-0.75em"><span class="pstrut" style="height:2.84em"></span><span class="mord"><span class="mord"></span></span></span><span style="top:2.25em"><span class="pstrut" style="height:2.84em"></span><span class="mord"><span class="mord"></span></span></span><span style="top:3.75em"><span class="pstrut" style="height:2.84em"></span><span class="mord"><span class="mord"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.25em"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.75em"><span style="top:-9.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">41</span></span><span class="mclose">)</span></span></span><span style="top:-8.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">41</span></span><span class="mclose">)</span></span></span><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">∞</span></span></span><span style="top:-3.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">∞</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord vbox"><span class="thinbox"><span class="clap"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em"></span><span class="inner"><span><span class="mord"><span class="mord text"><span class="mord textrm">y = x + 1</span></span></span></span></span><span class="fix"></span></span></span></span></span></span><span style="top:-0.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord vbox"><span class="thinbox"><span class="clap"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em"></span><span class="inner"><span><span class="mord"><span class="mord text"><span class="mord textrm">y = 42</span></span></span></span></span><span class="fix"></span></span></span></span></span></span><span style="top:2.09em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:3.59em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathrm">true</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.25em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.75em"><span style="top:-9.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord mathrm">vp</span></span><span class="mopen"><span class="mopen">[</span><span class="mspace" style="margin-right:-0.1778em"></span><span class="mopen">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span><span class="mclose"><span class="mclose">]</span><span class="mspace" style="margin-right:-0.1778em"></span><span class="mclose">]</span></span><span class="mopen">(</span><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">42</span></span><span class="mclose">))</span></span></span><span style="top:-8.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:1em"></span><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span></span><span class="mclose">)</span></span></span><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:1em"></span><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span></span><span class="mclose">)</span></span></span><span style="top:-3.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:1em"></span><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span></span><span class="mclose">)</span></span></span><span style="top:2.09em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:1em"></span><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">1</span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.75em"><span></span></span></span></span></span></span></span><span class="tag"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.75em"><span style="top:-9.91em"><span class="pstrut" style="height:3em"></span><span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">the specification</span></span><span class="mord">)</span></span></span></span><span style="top:-8.41em"><span class="pstrut" style="height:3em"></span><span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord"><span class="mord mathrm">vp</span></span><span class="mord"> semantics</span></span><span class="mord">)</span></span></span></span><span style="top:-6.91em"><span class="pstrut" style="height:3em"></span><span></span></span><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord"><span class="mord mathrm">vp</span></span><span class="mord"> semantics</span></span><span class="mord">)</span></span></span></span><span style="top:-3.91em"><span class="pstrut" style="height:3em"></span><span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mclose">?</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">b</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mopen">{</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">∞</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mclose">}</span></span><span class="mord">)</span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord"><span class="mord mathrm">vp</span></span><span class="mord"> semantics</span></span><span class="mord">)</span></span></span></span><span style="top:-0.91em"><span class="pstrut" style="height:3em"></span><span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">assumption </span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">41</span></span><span class="mord">)</span></span></span></span><span style="top:0.59em"><span class="pstrut" style="height:3em"></span><span></span></span><span style="top:2.09em"><span class="pstrut" style="height:3em"></span><span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord"><span class="mord mathrm">vp</span></span><span class="mord"> semantics</span></span><span class="mord">)</span></span></span></span><span style="top:3.59em"><span class="pstrut" style="height:3em"></span><span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.25em"><span></span></span></span></span></span></span></span></span>
<p>So if we assume <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>41</mn></mrow><annotation encoding="application/x-tex">x = 41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">41</span></span></span></span> holds in the beginning, then we know that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mn>42</mn></mrow><annotation encoding="application/x-tex">y = 42</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">42</span></span></span></span> holds afterwards.
If we assume <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo mathvariant="normal">≠</mo><mn>41</mn></mrow><annotation encoding="application/x-tex">x \neq 41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">41</span></span></span></span>, then we know nothing (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">t</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">e</mi></mrow><annotation encoding="application/x-tex">\mathrm{true}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord"><span class="mord mathrm">true</span></span></span></span></span>) about the final state.</p>
<p>In short: we can use embed expressions <code>?(b)</code> to write Boolean assumptions in the <code>pre</code> and Boolean assertions in the <code>post</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="embedding-boolean-specifications-in-coprocedures">Embedding Boolean Specifications in Coprocedures<a href="#embedding-boolean-specifications-in-coprocedures" class="hash-link" aria-label="Direct link to Embedding Boolean Specifications in Coprocedures" title="Direct link to Embedding Boolean Specifications in Coprocedures">​</a></h3>
<p>The same kind of reasoning for embedding Boolean specifications applies to coprocedures.
However, there is one thing to be careful about: We usually need to <em>negate</em> the Boolean specification to obtain the &quot;intuitive&quot; result.</p>
<p><strong>TLDR:</strong> In coprocedures, you&#x27;ll usually want to use <code>!?(b)</code> instead of <code>?(b)</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accidental-incorrectness-reasoning">Accidental Incorrectness Reasoning<a href="#accidental-incorrectness-reasoning" class="hash-link" aria-label="Direct link to Accidental Incorrectness Reasoning" title="Direct link to Accidental Incorrectness Reasoning">​</a></h4>
<p>Consider the following modified example which <em>always</em> assigns <code>y = 42</code>.</p>
<div class="language-heyvl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-heyvl codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">coproc</span><span class="token plain"> forty_two_upper(x: </span><span class="token builtin" style="color:rgb(72, 118, 214)">UInt</span><span class="token plain">) </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> (y: </span><span class="token builtin" style="color:rgb(72, 118, 214)">UInt</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">pre</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token plain">(x </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">41</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">post</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token plain">(y </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">42</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    y </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will <strong>not verify</strong> because it actually checks <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">?</mtext><mo stretchy="false">(</mo><mi>x</mi><mo>=</mo><mn>41</mn><mo stretchy="false">)</mo><mo>≥</mo><mrow><mi mathvariant="normal">v</mi><mi mathvariant="normal">p</mi></mrow><mo mathvariant="normal" lspace="0em" rspace="0em">⟦</mo><mi>S</mi><mo mathvariant="normal" lspace="0em" rspace="0em">⟧</mo><mo stretchy="false">(</mo><mtext mathvariant="monospace">?</mtext><mo stretchy="false">(</mo><mi>y</mi><mo>=</mo><mn>42</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\texttt{?}(x = 41) \geq \mathrm{vp}\llbracket{S}\rrbracket(\texttt{?}(y = 42))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord texttt">?</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">41</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathrm">vp</span></span><span class="mopen"><span class="mopen">[</span><span class="mspace" style="margin-right:-0.1778em"></span><span class="mopen">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span><span class="mclose"><span class="mclose">]</span><span class="mspace" style="margin-right:-0.1778em"></span><span class="mclose">]</span></span><span class="mopen">(</span><span class="mord text"><span class="mord texttt">?</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">42</span><span class="mclose">))</span></span></span></span>, which is equivalent to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>42</mn><mo>=</mo><mn>42</mn><mo stretchy="false">)</mo><mo>⇒</mo><mo stretchy="false">(</mo><mi>x</mi><mo>=</mo><mn>41</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(42 = 42) \Rightarrow (x = 41)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">42</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">42</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">41</span><span class="mclose">)</span></span></span></span>, i.e. the only way the coprocedure does <strong>not</strong> verify is if there is an initial state satisfying <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>42</mn><mo>=</mo><mn>42</mn></mrow><annotation encoding="application/x-tex">42 = 42</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">42</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">42</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>41</mn></mrow><annotation encoding="application/x-tex">x = 41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">41</span></span></span></span> does not hold.
But since <em>all</em> states satisfy <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>42</mn><mo>=</mo><mn>42</mn></mrow><annotation encoding="application/x-tex">42 = 42</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">42</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">42</span></span></span></span>, e.g. the initial state <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span> is a counter-example to verification.</p>
<p>One can understand this as an instance of <em>Reverse Hoare Logic</em> or <em>(Partial) Incorrectness Reasoning</em>, i.e. asking a question of the form: &quot;Do all initial states that <em>reach</em> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mn>42</mn></mrow><annotation encoding="application/x-tex">y = 42</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">42</span></span></span></span> satisfy <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>41</mn></mrow><annotation encoding="application/x-tex">x = 41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">41</span></span></span></span>?&quot;.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>How To: Obtaining the above formula via <code>--print-theorem --no-slice-error</code>.</summary><div><div class="collapsibleContent_i85q"><p>Using the <code>--print-theorem</code> command-line flag, you can print the theorem Caesar tries to prove about your (co)procedures.
The result will have some optimizations applied, but it might be helpful to understand what exactly is being verified.
We recommend adding the <code>--no-slice-error</code> flag to obtain a simpler version that is not cluttered with stuff from slicing for error messages.
For example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">caesar verify --print-theorem --no-slice-error example.heyvl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="usually-you-want-coembed">Usually You Want <code>!?(b)</code><a href="#usually-you-want-coembed" class="hash-link" aria-label="Direct link to usually-you-want-coembed" title="Direct link to usually-you-want-coembed">​</a></h4>
<p>We often write <code>!?(b)</code> to abbreviate <code>?(!(b))</code>, i.e. mapping <code>b</code> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span> if it is true and to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord">∞</span></span></span></span> otherwise.<sup><a href="#user-content-fn-bang-question-operator" id="user-content-fnref-bang-question-operator" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
<div class="language-heyvl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-heyvl codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">coproc</span><span class="token plain"> forty_two_upper2(x: </span><span class="token builtin" style="color:rgb(72, 118, 214)">UInt</span><span class="token plain">) </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> (y: </span><span class="token builtin" style="color:rgb(72, 118, 214)">UInt</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">pre</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">!</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token plain">(x </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">41</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">post</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">!</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token plain">(y </span><span class="token operator" style="color:rgb(12, 150, 155)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">42</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    y </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, the <code>pre</code> works as expected.
It tells the verifier to verify only from initial states that satisfy <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>41</mn></mrow><annotation encoding="application/x-tex">x = 41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">41</span></span></span></span>.
And the <code>post</code> encodes that we reach <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mn>42</mn></mrow><annotation encoding="application/x-tex">y = 42</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">42</span></span></span></span> — the set of initial states that reach <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo mathvariant="normal">≠</mo><mn>42</mn></mrow><annotation encoding="application/x-tex">y \neq 42</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">42</span></span></span></span> contains only states that satisfy <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo mathvariant="normal">≠</mo><mn>41</mn></mrow><annotation encoding="application/x-tex">x \neq 41</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">41</span></span></span></span>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-or-no-prepost-annotations">Multiple Or No <code>pre</code>/<code>post</code> Annotations<a href="#multiple-or-no-prepost-annotations" class="hash-link" aria-label="Direct link to multiple-or-no-prepost-annotations" title="Direct link to multiple-or-no-prepost-annotations">​</a></h3>
<p>Multiple <code>pre</code> and <code>post</code> annotations are logically combined.<sup><a href="#user-content-fn-spec-combination" id="user-content-fnref-spec-combination" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>
<code>⊓</code> is the minimum operator and <code>⊔</code> maximum operator (see <a href="/docs/heyvl/expressions">expressions documentation</a>).</p>
<table><thead><tr><th></th><th><code>pre A pre B</code></th><th><code>post C post D</code></th></tr></thead><tbody><tr><td><code>proc</code></td><td><code>pre (A ⊓ B)</code></td><td><code>post (C ⊓ D)</code></td></tr><tr><td><code>coproc</code></td><td><code>pre (A ⊔ B)</code></td><td><code>post (C ⊔ D)</code></td></tr></tbody></table>
<p>In <code>proc</code>s, we combine <code>pre</code>s and <code>post</code>s with the minimum <code>⊓</code>.
In <code>coproc</code>s, the combination is dual and uses the maximum <code>⊔</code>.</p>
<p>This generalizes the Boolean setting neatly:</p>
<table><thead><tr><th></th><th><code>pre ?(A) pre ?(B)</code></th><th><code>post ?(C) post ?(D)</code></th></tr></thead><tbody><tr><td><code>proc</code></td><td><code>pre ?(A &amp;&amp; B)</code></td><td><code>post ?(C &amp;&amp; D)</code></td></tr><tr><td><code>coproc</code></td><td><code>pre ?(A || B)</code></td><td><code>post ?(C || D)</code></td></tr></tbody></table>
<p>If <a href="#usually-you-want-coembed">we use <code>!?(b)</code> in <code>coproc</code>s</a>, then we obtain that <code>pre !?(A) pre !?(B)</code> is equivalent to <code>pre !?(A &amp;&amp; B)</code> as one might expect.
Same for <code>post</code> annotations.</p>
<p>The specification is optional; if it&#x27;s not provided, Caesar will add a default specification: <code>pre ?(true)</code> and <code>post ?(true)</code> for procedures and <code>pre ?(false)</code> and <code>post ?(false)</code> for coprocedures.</p>
<p>The defaults correspond to the empty conjunction (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋀</mo><mi mathvariant="normal">∅</mi><mo>=</mo><mrow><mi mathvariant="normal">t</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">e</mi></mrow></mrow><annotation encoding="application/x-tex">\bigwedge \emptyset = \mathrm{true}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mop op-symbol small-op" style="position:relative;top:0em">⋀</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">∅</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord"><span class="mord mathrm">true</span></span></span></span></span>) and empty disjunction (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋁</mo><mi mathvariant="normal">∅</mi><mo>=</mo><mrow><mi mathvariant="normal">f</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">e</mi></mrow></mrow><annotation encoding="application/x-tex">\bigvee \emptyset = \mathrm{false}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mop op-symbol small-op" style="position:relative;top:0em">⋁</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">∅</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord"><span class="mord mathrm">false</span></span></span></span></span>).
The quantitative setting behaves the same, we have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>inf</mi><mo>⁡</mo><mi mathvariant="normal">∅</mi><mo>=</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\inf \emptyset = \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em"></span><span class="mop">in<span style="margin-right:0.07778em">f</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">∅</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord">∞</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>sup</mi><mo>⁡</mo><mi mathvariant="normal">∅</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\sup \emptyset = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9444em;vertical-align:-0.1944em"></span><span class="mop">sup</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">∅</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="procs-without-body">Procedures Without a Body<a href="#procs-without-body" class="hash-link" aria-label="Direct link to Procedures Without a Body" title="Direct link to Procedures Without a Body">​</a></h3>
<p>Procedures and coprocedures can be written without a corresponding body.
This allows us to <em><a href="https://www.cs.ox.ac.uk/publications/books/PfS/" target="_blank" rel="noopener noreferrer">program from specifications</a></em>, i.e. write and verify programs incrementally.
We can start with a specification and step-by-step fill in executable code (or just don&#x27;t if we don&#x27;t feel like it).</p>
<p>Since <a href="#calling-procedures">procedure calls only need the callee specification</a>, we can just write a procedure specification and use it in other places.
There does not need to be procedure body of the callee at all.</p>
<p>This can be used to introduce unsoundness even without using <a href="/docs/heyvl/statements#assert-and-assume"><code>assume</code> statements</a>.
Calling the following procedure is essentially the same as writing <code>assume ?(false)</code>.</p>
<div class="language-heyvl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-heyvl codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">proc</span><span class="token plain"> unsound() </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> ()</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">pre</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token plain">(</span><span class="token boolean" style="color:rgb(188, 84, 84)">true</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">post</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token plain">(</span><span class="token boolean" style="color:rgb(188, 84, 84)">false</span><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="calling-procedures">Calling Procedures<a href="#calling-procedures" class="hash-link" aria-label="Direct link to Calling Procedures" title="Direct link to Calling Procedures">​</a></h2>
<p>We can call <code>proc</code>s from <code>proc</code>s and <code>coproc</code>s from <code>coproc</code>s.
Mixing both is unsound and will result in an error.
In the following, we will talk about procedures, but everything applies to coprocedures as well.</p>
<p>Procedure calls make use of the procedure&#x27;s specification <em>only</em> and do not inspect the procedure body.
Somewhat informally, we could say that <em>assuming</em> the callee procedure verifies, the procedure call can be replaced by the procedure&#x27;s body and the program will still verify.
This enables modular reasoning: one can verify a big program and we can re-use already-verified parts of it in other parts.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-a-spare-engine">Example: A Spare Engine<a href="#example-a-spare-engine" class="hash-link" aria-label="Direct link to Example: A Spare Engine" title="Direct link to Example: A Spare Engine">​</a></h3>
<p>The following example models running an engine with a spare engine available.
In <code>runPrimaryOrSpare</code>, the primary engine works with probability of 90%.
If it fails, we have another spare available that is guaranteed to work with the same probability.</p>
<div class="language-heyvl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-heyvl codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">proc</span><span class="token plain"> spare() </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> (working: </span><span class="token builtin" style="color:rgb(72, 118, 214)">Bool</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">pre</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0.9</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">post</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">working</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    working </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> flip(</span><span class="token number" style="color:rgb(170, 9, 130)">0.95</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">proc</span><span class="token plain"> runPrimaryOrSpare() </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> (working: </span><span class="token builtin" style="color:rgb(72, 118, 214)">Bool</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">pre</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0.99</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">post</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">working</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    working </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> flip(</span><span class="token number" style="color:rgb(170, 9, 130)">0.9</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">!</span><span class="token plain">working </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        working </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> spare()</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The specification of <code>spare</code> says <code>working</code> is true with probability of at least <code>0.9</code> (and in fact the coin flip says it is <code>0.95</code>).
Thus, we can verify a success probability of <code>runOrSpare</code> of at least <code>0.99</code>.
However, we cannot verify a lower bound of <code>0.995</code> because the specification of <code>spare</code> does not guarantee it (even though it is true here).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-or-no-return-values">Multiple Or No Return Values<a href="#multiple-or-no-return-values" class="hash-link" aria-label="Direct link to Multiple Or No Return Values" title="Direct link to Multiple Or No Return Values">​</a></h3>
<p>If the callee has multiple return values, multiple variables may be assigned to by comma-separating them.
For example, if <code>spare</code> returned two variables, we could obtain the results via <code>working1, working2 = spare()</code>.</p>
<p>If the callee has no return values, we just call it without the assignment.
For example, we simply write <code>spare()</code> as a statement to call it without assignment.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assert-assume-understanding-of-procedure-calls">Assert-Assume Understanding of Procedure Calls<a href="#assert-assume-understanding-of-procedure-calls" class="hash-link" aria-label="Direct link to Assert-Assume Understanding of Procedure Calls" title="Direct link to Assert-Assume Understanding of Procedure Calls">​</a></h3>
<p>Internally, procedure calls are translated to HeyVL verification statements (see <a href="/docs/heyvl/statements">statements documentation</a>).
We can understand how procedure calls work by understanding this encoding.</p>
<p>During the verification of <code>runPrimaryOrSpare</code>, we replace the call to <code>spare</code> by a sequence of <code>assert</code>, <code>havoc,</code> <code>validate</code>, and <code>assume</code> statements.</p>
<div class="language-heyvl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-heyvl codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">proc</span><span class="token plain"> runPrimaryOrSpare() </span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> (working: </span><span class="token builtin" style="color:rgb(72, 118, 214)">Bool</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">pre</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0.99</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">post</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">working</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    working </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> flip(</span><span class="token number" style="color:rgb(170, 9, 130)">0.9</span><span class="token plain">)</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">!</span><span class="token plain">working </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">assert</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0.95</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">havoc</span><span class="token plain"> success</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">validate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">assume</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">success</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>How To: Obtaining intermediate encodings via <code>--print-core</code>.</summary><div><div class="collapsibleContent_i85q"><p>To obtain the intermediate encodings from Caesar, we can use the <code>--print-core</code> command-line flag.
This will print the fully desugared HeyVL code for each procedure to standard output.
For example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token plain">caesar verify  --print-core example.heyvl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<p>We can now read the encoding as follows:</p>
<ol>
<li>Before the call, <code>assert</code> the <code>pre</code> <code>spare()</code>. This means that the expected value (going backwards) is at most <code>0.95</code>.</li>
<li>We then forget the current value of <code>success</code> via <code>havoc</code>. This models that <code>spare</code> can have arbitrary effects on return values.</li>
<li>We <code>validate</code> (the following assumption must be absolutely true).</li>
<li>We can only <code>assume</code> the <code>post</code> of <code>spare</code>, i.e. that <code>success</code> is true.</li>
</ol>
<p>This generalizes the Boolean setting:</p>
<ol>
<li>Before the call, the <code>pre</code> must hold.</li>
<li>Forget the current value of modified variables.</li>
<li>(The <code>validate</code> does not have any effect in the Boolean setting.)</li>
<li>Assume that the <code>post</code> holds after the call.</li>
</ol>
<p>A more formal treatment of the encoding and semantics of procedure calls can be found in our <a href="/docs/publications#oopsla-23">OOPSLA &#x27;23 paper</a>.</p>
<!-- -->
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_LWe7 sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-on-negative-numbers">
<p>Many verification tasks that require reasoning with negative numbers can be embedded in this framework. First, note that we can still have negative numbers in our program states, we just have to ensure that the <code>post</code> is non-negative. <a href="https://dl.acm.org/doi/pdf/10.1145/3434320#page=24" target="_blank" rel="noopener noreferrer">Chapter 11 of the paper <em>&quot;Relatively Complete Verification for Probabilistic Programs&quot;</em></a> by Batz et al. might be of interest for further reading. <a href="#user-content-fnref-on-negative-numbers" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-bang-question-operator">
<p><code>!?(b)</code> is not a special kind of operator, it is simply the <code>!</code> operator applied to <code>?(b)</code>, i.e. <code>!(?(b))</code>.
The negation operator <code>!</code> is defined on <code>EUReal</code> by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">!</mo><mn>0</mn><mo>=</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">!0 = \infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mclose">!</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord">∞</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">!</mo><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">!x = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mclose">!</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span> for all <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo mathvariant="normal">≠</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x \neq 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">0</span></span></span></span>.
Thus, <code>!?(b)</code> is logically equivalent to <code>?(!b)</code>.
In the <a href="/docs/publications#oopsla-23">OOPSLA &#x27;23 paper</a>, we denoted <code>!?(b)</code> by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mo stretchy="false">?</mo></mrow><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{co?}(b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathrm">co</span><span class="mclose">?</span></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span>. <a href="#user-content-fnref-bang-question-operator" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-spec-combination">
<p>The combination of specifications is a logical consequence of their encodings in HeyVL. When <em>verifying</em> a procedure, <code>pre</code> annotations will be translated to <code>assume</code> and <code>post</code> annotations will be translated to <code>assert</code> statements.
One can prove that the HeyVL statements <code>assume A1; assume A2</code> are equivalent to <code>assume (A1 ⊓ A2)</code>, and also that the sequence <code>assert A1; assert A2</code> is equivalent to <code>assert (A1 ⊓ A2)</code>.
The same equalities can be used for the procedure <em>call</em> encoding. <a href="#user-content-fnref-spec-combination" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/moves-rwth/caesar/tree/main/website/docs/heyvl/procs.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/heyvl/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">HeyVL</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/heyvl/statements"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Statements</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#procs-by-example-increment-with-50-probability" class="table-of-contents__link toc-highlight">Procs by Example: Increment With 50% Probability</a></li><li><a href="#writing-specifications" class="table-of-contents__link toc-highlight">Writing Specifications</a><ul><li><a href="#the-specification-type-eureal-for-quantitative-reasoning" class="table-of-contents__link toc-highlight">The Specification Type: <code>EUReal</code> for Quantitative Reasoning</a></li><li><a href="#embedding-boolean-specifications" class="table-of-contents__link toc-highlight">Embedding Boolean Specifications</a></li><li><a href="#embedding-boolean-specifications-in-coprocedures" class="table-of-contents__link toc-highlight">Embedding Boolean Specifications in Coprocedures</a></li><li><a href="#multiple-or-no-prepost-annotations" class="table-of-contents__link toc-highlight">Multiple Or No <code>pre</code>/<code>post</code> Annotations</a></li><li><a href="#procs-without-body" class="table-of-contents__link toc-highlight">Procedures Without a Body</a></li></ul></li><li><a href="#calling-procedures" class="table-of-contents__link toc-highlight">Calling Procedures</a><ul><li><a href="#example-a-spare-engine" class="table-of-contents__link toc-highlight">Example: A Spare Engine</a></li><li><a href="#multiple-or-no-return-values" class="table-of-contents__link toc-highlight">Multiple Or No Return Values</a></li><li><a href="#assert-assume-understanding-of-procedure-calls" class="table-of-contents__link toc-highlight">Assert-Assume Understanding of Procedure Calls</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/heyvl">HeyVL</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/stdlib">Standard Library</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/proof-rules">Proof Rules</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/moves-rwth/caesar/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Caesar Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/publications">Academic Publications</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">News</a></li><li class="footer__item"><a href="https://github.com/moves-rwth/caesar" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Caesar Developers. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>