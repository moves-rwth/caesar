"use strict";(self.webpackChunkcaesar_website=self.webpackChunkcaesar_website||[]).push([[52],{6687:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"proof-rules/past","title":"Positive Almost-Sure Termination","description":"Positive almost-sure termination (PAST for short) means that a program terminates almost-surely and the expected runtime to termination is finite.","source":"@site/docs/proof-rules/past.md","sourceDirName":"proof-rules","slug":"/proof-rules/past","permalink":"/docs/proof-rules/past","draft":false,"unlisted":false,"editUrl":"https://github.com/moves-rwth/caesar/tree/main/website/docs/proof-rules/past.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"Almost-Sure Termination","permalink":"/docs/proof-rules/ast"},"next":{"title":"Optional Stopping Theorem","permalink":"/docs/proof-rules/ost"}}');var t=n(4848),i=n(8453);const r={sidebar_position:6},o="Positive Almost-Sure Termination",l={},c=[{value:"Finite Expected Runtime",id:"finite-expected-runtime",level:2},{value:"PAST from Ranking Superinvariants",id:"past-from-ranking-superinvariants",level:2},{value:"Formal Theorem",id:"formal-theorem",level:3},{value:"Usage",id:"usage",level:3}];function h(e){const s={a:"a",admonition:"admonition",annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mi:"mi",mo:"mo",mrow:"mrow",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"positive-almost-sure-termination",children:"Positive Almost-Sure Termination"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.em,{children:"Positive almost-sure termination"})," (PAST for short) means that a program ",(0,t.jsx)(s.a,{href:"ast",children:"terminates almost-surely"})," and the expected runtime to termination is finite.\nIn terms of the ",(0,t.jsx)(s.a,{href:"calculi",children:"expected runtime calculus"}),", this means that ",(0,t.jsx)(s.code,{children:"ert[C](0) < \u221e"})," holds for a program ",(0,t.jsx)(s.code,{children:"C"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"finite-expected-runtime",children:"Finite Expected Runtime"}),"\n",(0,t.jsxs)(s.p,{children:["The simplest way to prove positive almost-sure termination is by proving a finite upper bound ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{children:"g"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"g"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"})]})})]})," on the expected runtime of a program.\nThe upper bound ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{children:"g"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"g"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"})]})})]})," must be finite: for every state ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{children:"s"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"s"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.4306em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",children:"s"})]})})]}),", ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsx)(s.mi,{children:"g"}),(0,t.jsx)(s.mo,{stretchy:"false",children:"("}),(0,t.jsx)(s.mi,{children:"s"}),(0,t.jsx)(s.mo,{stretchy:"false",children:")"}),(0,t.jsx)(s.mo,{children:"<"}),(0,t.jsx)(s.mi,{mathvariant:"normal",children:"\u221e"})]}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"g(s) < \\infty"})]})})}),(0,t.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,t.jsx)(s.span,{className:"mopen",children:"("}),(0,t.jsx)(s.span,{className:"mord mathnormal",children:"s"}),(0,t.jsx)(s.span,{className:"mclose",children:")"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"<"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.4306em"}}),(0,t.jsx)(s.span,{className:"mord",children:"\u221e"})]})]})]})," must hold."]}),"\n",(0,t.jsxs)(s.p,{children:["Upper bounds on the expected runtime can be shown with ",(0,t.jsx)(s.a,{href:"/docs/proof-rules/induction",children:"Park induction"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"past-from-ranking-superinvariants",children:"PAST from Ranking Superinvariants"}),"\n",(0,t.jsxs)(s.p,{children:['Caesar supports proofs of "PAST from Ranking Superinvariants" by ',(0,t.jsx)(s.a,{href:"https://doi.org/10.1007/978-3-642-39799-8_34",children:"Chakarov and Sankaranarayanan (CAV 2013)"})," as a built-in encoding with the ",(0,t.jsx)(s.code,{children:"@past"})," annotation on ",(0,t.jsx)(s.code,{children:"while"})," loops."]}),"\n",(0,t.jsx)(s.h3,{id:"formal-theorem",children:"Formal Theorem"}),"\n",(0,t.jsx)(s.admonition,{title:"TODO",type:"danger"}),"\n",(0,t.jsx)(s.h3,{id:"usage",children:"Usage"}),"\n",(0,t.jsxs)(s.p,{children:["Consider the following example, where we have a loop that decrements a variable ",(0,t.jsx)(s.code,{children:"x"})," with probability ",(0,t.jsx)(s.code,{children:"0.5"})," in each iteration.\nThe loop terminates with probability ",(0,t.jsx)(s.code,{children:"1"})," and the expected number of iterations is finite.\nWe show this by using the ",(0,t.jsx)(s.code,{children:"@past"})," annotation on the loop."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-heyvl",children:"proc main(init_x: UInt) -> (x: UInt)\n{\n    var prob_choice: Bool\n    x = init_x\n    @past(\n        /* invariant: */ x + 1,\n        /* epsilon:   */ 0.5,\n        /* k:         */ 1)\n    while 0 < x {\n        prob_choice = flip(0.5)\n        if prob_choice {\n            x = x - 1\n        } else {}\n    }\n}\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Inputs:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"invariant"}),": The quantitative invariant which should decrease."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"epsilon"}),": The expected decrease of the invariant after an iteration."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"k"}),": The maximum change of the invariant in one iteration."]}),"\n"]})]})}function m(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>o});var a=n(6540);const t={},i=a.createContext(t);function r(e){const s=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);