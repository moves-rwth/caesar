"use strict";(self.webpackChunkcaesar_website=self.webpackChunkcaesar_website||[]).push([[52],{4252:(s,e,a)=>{a.d(e,{A:()=>t});a(6540);var n=a(5195);const l={tableOfContentsInline:"tableOfContentsInline_prmo"};var i=a(4848);function t({toc:s,minHeadingLevel:e,maxHeadingLevel:a}){return(0,i.jsx)("div",{className:l.tableOfContentsInline,children:(0,i.jsx)(n.A,{toc:s,minHeadingLevel:e,maxHeadingLevel:a,className:"table-of-contents",linkClassName:null})})}},5195:(s,e,a)=>{a.d(e,{A:()=>j});var n=a(6540),l=a(6342);function i(s){const e=s.map((s=>({...s,parentIndex:-1,children:[]}))),a=Array(7).fill(-1);e.forEach(((s,e)=>{const n=a.slice(2,s.level);s.parentIndex=Math.max(...n),a[s.level]=e}));const n=[];return e.forEach((s=>{const{parentIndex:a,...l}=s;a>=0?e[a].children.push(l):n.push(l)})),n}function t({toc:s,minHeadingLevel:e,maxHeadingLevel:a}){return s.flatMap((s=>{const n=t({toc:s.children,minHeadingLevel:e,maxHeadingLevel:a});return function(s){return s.level>=e&&s.level<=a}(s)?[{...s,children:n}]:n}))}function r(s){const e=s.getBoundingClientRect();return e.top===e.bottom?r(s.parentNode):e}function c(s,{anchorTopOffset:e}){const a=s.find((s=>r(s).top>=e));if(a){return function(s){return s.top>0&&s.bottom<window.innerHeight/2}(r(a))?a:s[s.indexOf(a)-1]??null}return s[s.length-1]??null}function m(){const s=(0,n.useRef)(0),{navbar:{hideOnScroll:e}}=(0,l.p)();return(0,n.useEffect)((()=>{s.current=e?0:document.querySelector(".navbar").clientHeight}),[e]),s}function h(s){const e=(0,n.useRef)(void 0),a=m();(0,n.useEffect)((()=>{if(!s)return()=>{};const{linkClassName:n,linkActiveClassName:l,minHeadingLevel:i,maxHeadingLevel:t}=s;function r(){const s=function(s){return Array.from(document.getElementsByClassName(s))}(n),r=function({minHeadingLevel:s,maxHeadingLevel:e}){const a=[];for(let n=s;n<=e;n+=1)a.push(`h${n}.anchor`);return Array.from(document.querySelectorAll(a.join()))}({minHeadingLevel:i,maxHeadingLevel:t}),m=c(r,{anchorTopOffset:a.current}),h=s.find((s=>m&&m.id===function(s){return decodeURIComponent(s.href.substring(s.href.indexOf("#")+1))}(s)));s.forEach((s=>{!function(s,a){a?(e.current&&e.current!==s&&e.current.classList.remove(l),s.classList.add(l),e.current=s):s.classList.remove(l)}(s,s===h)}))}return document.addEventListener("scroll",r),document.addEventListener("resize",r),r(),()=>{document.removeEventListener("scroll",r),document.removeEventListener("resize",r)}}),[s,a])}var o=a(8774),d=a(4848);function x({toc:s,className:e,linkClassName:a,isChild:n}){return s.length?(0,d.jsx)("ul",{className:n?void 0:e,children:s.map((s=>(0,d.jsxs)("li",{children:[(0,d.jsx)(o.A,{to:`#${s.id}`,className:a??void 0,dangerouslySetInnerHTML:{__html:s.value}}),(0,d.jsx)(x,{isChild:!0,toc:s.children,className:e,linkClassName:a})]},s.id)))}):null}const p=n.memo(x);function j({toc:s,className:e="table-of-contents table-of-contents__left-border",linkClassName:a="table-of-contents__link",linkActiveClassName:r,minHeadingLevel:c,maxHeadingLevel:m,...o}){const x=(0,l.p)(),j=c??x.tableOfContents.minHeadingLevel,g=m??x.tableOfContents.maxHeadingLevel,N=function({toc:s,minHeadingLevel:e,maxHeadingLevel:a}){return(0,n.useMemo)((()=>t({toc:i(s),minHeadingLevel:e,maxHeadingLevel:a})),[s,e,a])}({toc:s,minHeadingLevel:j,maxHeadingLevel:g});return h((0,n.useMemo)((()=>{if(a&&r)return{linkClassName:a,linkActiveClassName:r,minHeadingLevel:j,maxHeadingLevel:g}}),[a,r,j,g])),(0,d.jsx)(p,{toc:N,className:e,linkClassName:a,...o})}},6324:(s,e,a)=>{a.r(e),a.d(e,{assets:()=>m,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"proof-rules/past","title":"Positive Almost-Sure Termination","description":"Positive almost-sure termination (PAST for short) means that a program terminates almost-surely and the expected runtime to termination is finite.","source":"@site/docs/proof-rules/past.md","sourceDirName":"proof-rules","slug":"/proof-rules/past","permalink":"/docs/proof-rules/past","draft":false,"unlisted":false,"editUrl":"https://github.com/moves-rwth/caesar/tree/main/website/docs/proof-rules/past.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"Almost-Sure Termination","permalink":"/docs/proof-rules/ast"},"next":{"title":"Optional Stopping Theorem","permalink":"/docs/proof-rules/ost"}}');var l=a(4848),i=a(8453),t=a(4252);const r={sidebar_position:6},c="Positive Almost-Sure Termination",m={},h=[{value:"Upper Bounds on ert",id:"upper-bounds-on-ert",level:2},{value:"PAST from Ranking Superinvariants",id:"past-from-ranking-superinvariants",level:2},{value:"Formal Theorem",id:"formal-theorem",level:3},{value:"Usage",id:"usage",level:3},{value:"Relation to the ert Calculus Approach",id:"relation-to-the-ert-calculus-approach",level:3}];function o(s){const e={a:"a",annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",ol:"ol",p:"p",pre:"pre",section:"section",semantics:"semantics",span:"span",strong:"strong",sup:"sup",ul:"ul",...(0,i.R)(),...s.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"positive-almost-sure-termination",children:"Positive Almost-Sure Termination"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.em,{children:"Positive almost-sure termination"})," (PAST for short) means that a program ",(0,l.jsx)(e.a,{href:"ast",children:"terminates almost-surely"})," and the expected runtime to termination is finite.\nIn terms of the ",(0,l.jsx)(e.a,{href:"calculi",children:"expected runtime calculus"}),", this means that ",(0,l.jsx)(e.code,{children:"ert[C](0) < \u221e"})," holds for a program ",(0,l.jsx)(e.code,{children:"C"}),"."]}),"\n",(0,l.jsx)(e.p,{children:"In Caesar, there are several ways to prove PAST:"}),"\n","\n",(0,l.jsx)(t.A,{toc:h,maxHeadingLevel:"2"}),"\n",(0,l.jsx)(e.h2,{id:"upper-bounds-on-ert",children:"Upper Bounds on ert"}),"\n",(0,l.jsxs)(e.p,{children:["The simplest way to prove positive almost-sure termination is by proving a finite upper bound ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsx)(e.mi,{children:"g"})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"g"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"})]})})]})," on the expected runtime of a program using the expected runtime calculus, i.e. ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{mathvariant:"normal",children:"e"}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"r"}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"t"})]}),(0,l.jsx)(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u27e6"}),(0,l.jsx)(e.mi,{children:"C"}),(0,l.jsx)(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u27e7"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mn,{children:"0"}),(0,l.jsx)(e.mo,{stretchy:"false",children:")"}),(0,l.jsx)(e.mo,{children:"\u2264"}),(0,l.jsx)(e.mi,{children:"g"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\mathrm{ert}\\llbracket C \\rrbracket(0) \\leq g"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mord",children:(0,l.jsx)(e.span,{className:"mord mathrm",children:"ert"})}),(0,l.jsxs)(e.span,{className:"mopen",children:[(0,l.jsx)(e.span,{className:"mopen",children:"["}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"-0.1778em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"["})]}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,l.jsxs)(e.span,{className:"mclose",children:[(0,l.jsx)(e.span,{className:"mclose",children:"]"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"-0.1778em"}}),(0,l.jsx)(e.span,{className:"mclose",children:"]"})]}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord",children:"0"}),(0,l.jsx)(e.span,{className:"mclose",children:")"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"\u2264"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"})]})]})]}),".\nThe upper bound ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsx)(e.mi,{children:"g"})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"g"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"})]})})]})," must be finite: for every state ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsx)(e.mi,{children:"s"})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"s"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"s"})]})})]}),", ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"g"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mi,{children:"s"}),(0,l.jsx)(e.mo,{stretchy:"false",children:")"}),(0,l.jsx)(e.mo,{children:"<"}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"\u221e"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"g(s) < \\infty"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"s"}),(0,l.jsx)(e.span,{className:"mclose",children:")"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"<"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,l.jsx)(e.span,{className:"mord",children:"\u221e"})]})]})]})," must hold."]}),"\n",(0,l.jsxs)(e.p,{children:["Upper bounds on the expected runtime can be shown with ",(0,l.jsx)(e.a,{href:"/docs/proof-rules/induction",children:"Park induction"}),"."]}),"\n",(0,l.jsx)(e.h2,{id:"past-from-ranking-superinvariants",children:"PAST from Ranking Superinvariants"}),"\n",(0,l.jsxs)(e.p,{children:["Caesar supports proofs of PAST using ",(0,l.jsx)(e.em,{children:"ranking superinvariants"})," - also called ",(0,l.jsx)(e.em,{children:"ranking supermartingales"}),".\nWe use the formulation of ",(0,l.jsx)(e.a,{href:"http://publications.rwth-aachen.de/record/755408/files/755408.pdf#page=143",children:"Theorem 6.3 in Kaminski's PhD thesis"}),".\nThis theorem is a the wp-version of either"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Theorem 4 of ",(0,l.jsxs)(e.a,{href:"https://doi.org/10.1007/978-3-642-39799-8_34",children:["\u201e",(0,l.jsx)(e.em,{children:"Probabilistic Program Analysis with Martingales"}),"\u201c"]})," by Chakarov and  Sankaranarayanan (CAV 2013)."]}),"\n",(0,l.jsxs)(e.li,{children:["Theorem 5.6 of ",(0,l.jsxs)(e.a,{href:"https://doi.org/10.1145/2775051.2677001",children:["\u201e",(0,l.jsx)(e.em,{children:"Probabilistic Termination: Soundness, Completeness, and Compositionality"}),"\u201c"]})," by Fioriti and Hermanns (POPL 2015)."]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["Ranking superinvariants are supported via Caesar's built-in ",(0,l.jsx)(e.code,{children:"@past"})," annotation on ",(0,l.jsx)(e.code,{children:"while"})," loops."]}),"\n",(0,l.jsx)(e.h3,{id:"formal-theorem",children:"Formal Theorem"}),"\n",(0,l.jsxs)(e.p,{children:["Let ",(0,l.jsx)(e.code,{children:"while G { Body }"})," be a loop whose ",(0,l.jsx)(e.code,{children:"Body"})," universally certainly terminating.\nLet"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"I"})," is an expression of type ",(0,l.jsx)(e.code,{children:"UReal"})," called ",(0,l.jsx)(e.em,{children:"ranking superinvariant"}),"."]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"epsilon"})," is a positive real number."]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"K"})," is un upper bound on the change.\nsuch that the following conditions hold:"]}),"\n"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{stretchy:"false",children:"["}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"\xac"}),(0,l.jsx)(e.mi,{children:"G"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"]"}),(0,l.jsx)(e.mo,{children:"\u22c5"}),(0,l.jsx)(e.mi,{children:"I"}),(0,l.jsx)(e.mo,{children:"\u2264"}),(0,l.jsx)(e.mi,{children:"K"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"[\\neg G] \\cdot I \\leq K"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"["}),(0,l.jsx)(e.span,{className:"mord",children:"\xac"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"G"}),(0,l.jsx)(e.span,{className:"mclose",children:"]"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u22c5"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8193em",verticalAlign:"-0.136em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"\u2264"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.6833em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"})]})]})]}),","]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{stretchy:"false",children:"["}),(0,l.jsx)(e.mi,{children:"G"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"]"}),(0,l.jsx)(e.mo,{children:"\u22c5"}),(0,l.jsx)(e.mi,{children:"K"}),(0,l.jsx)(e.mo,{children:"\u226a"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"["}),(0,l.jsx)(e.mi,{children:"G"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"]"}),(0,l.jsx)(e.mo,{children:"\u22c5"}),(0,l.jsx)(e.mi,{children:"I"}),(0,l.jsx)(e.mo,{children:"+"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"["}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"\xac"}),(0,l.jsx)(e.mi,{children:"G"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"]"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"[G] \\cdot K \\ll [G] \\cdot I + [\\neg G]"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"["}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"G"}),(0,l.jsx)(e.span,{className:"mclose",children:"]"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u22c5"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.7224em",verticalAlign:"-0.0391em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"\u226a"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"["}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"G"}),(0,l.jsx)(e.span,{className:"mclose",children:"]"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u22c5"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"+"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"["}),(0,l.jsx)(e.span,{className:"mord",children:"\xac"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"G"}),(0,l.jsx)(e.span,{className:"mclose",children:"]"})]})]})]}),","]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mo,{stretchy:"false",children:"["}),(0,l.jsx)(e.mi,{children:"G"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"]"}),(0,l.jsx)(e.mo,{children:"\u22c5"}),(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{mathvariant:"normal",children:"w"}),(0,l.jsx)(e.mi,{mathvariant:"normal",children:"p"})]}),(0,l.jsx)(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u27e6"}),(0,l.jsx)(e.mi,{children:"B"}),(0,l.jsx)(e.mi,{children:"o"}),(0,l.jsx)(e.mi,{children:"d"}),(0,l.jsx)(e.mi,{children:"y"}),(0,l.jsx)(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u27e7"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mi,{children:"I"}),(0,l.jsx)(e.mo,{stretchy:"false",children:")"}),(0,l.jsx)(e.mo,{children:"\u2264"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"["}),(0,l.jsx)(e.mi,{children:"G"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"]"}),(0,l.jsx)(e.mo,{children:"\u22c5"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mi,{children:"I"}),(0,l.jsx)(e.mo,{children:"\u2212"}),(0,l.jsx)(e.mi,{children:"\u03f5"}),(0,l.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"[G] \\cdot \\mathrm{wp}\\llbracket Body \\rrbracket(I) \\leq [G] \\cdot (I - \\epsilon)"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"["}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"G"}),(0,l.jsx)(e.span,{className:"mclose",children:"]"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u22c5"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mord",children:(0,l.jsx)(e.span,{className:"mord mathrm",children:"wp"})}),(0,l.jsxs)(e.span,{className:"mopen",children:[(0,l.jsx)(e.span,{className:"mopen",children:"["}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"-0.1778em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"["})]}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.05017em"},children:"B"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"o"}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"d"}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,l.jsxs)(e.span,{className:"mclose",children:[(0,l.jsx)(e.span,{className:"mclose",children:"]"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"-0.1778em"}}),(0,l.jsx)(e.span,{className:"mclose",children:"]"})]}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,l.jsx)(e.span,{className:"mclose",children:")"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"\u2264"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"["}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"G"}),(0,l.jsx)(e.span,{className:"mclose",children:"]"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u22c5"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"\u03f5"}),(0,l.jsx)(e.span,{className:"mclose",children:")"})]})]})]}),",",(0,l.jsx)(e.sup,{children:(0,l.jsx)(e.a,{href:"#user-content-fn-literature-condition-3",id:"user-content-fnref-literature-condition-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["Then, ",(0,l.jsx)(e.code,{children:"while G { Body }"})," terminates universally positively almost-surely, i.e. ",(0,l.jsx)(e.code,{children:"ert[while G { Body }](0) < \u221e"}),"."]}),"\n",(0,l.jsx)(e.h3,{id:"usage",children:"Usage"}),"\n",(0,l.jsxs)(e.p,{children:["Consider the following example, where we have a loop that decrements a variable ",(0,l.jsx)(e.code,{children:"x"})," with probability ",(0,l.jsx)(e.code,{children:"0.5"})," in each iteration.\nThe loop terminates with probability ",(0,l.jsx)(e.code,{children:"1"})," and the expected number of iterations is finite.\nWe show this by using the ",(0,l.jsx)(e.code,{children:"@past"})," annotation on the loop."]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-heyvl",children:"proc main(init_x: UInt) -> (x: UInt)\n{\n    var prob_choice: Bool\n    x = init_x\n    @past(\n        /* invariant: */ x + 1,\n        /* epsilon:   */ 0.5,\n        /* K:         */ 1)\n    while 0 < x {\n        prob_choice = flip(0.5)\n        if prob_choice {\n            x = x - 1\n        } else {}\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Inputs:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"invariant"}),": The quantitative invariant which should decrease."]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"epsilon"}),": The expected decrease of the invariant after an iteration."]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"K"}),": The maximum change of the invariant in one iteration."]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"relation-to-the-ert-calculus-approach",children:"Relation to the ert Calculus Approach"}),"\n",(0,l.jsxs)(e.p,{children:['As Kaminski states in his thesis (p. 130), the PAST rule (Theorem 6.3) "is also very similar to and basically equivalent to [Park induction on ert]".\n"The main difference is that [Park induction on ert] needs less preconditions and always uses ',(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsx)(e.mi,{children:"\u03f5"}),(0,l.jsx)(e.mo,{children:"="}),(0,l.jsx)(e.mn,{children:"1"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\epsilon = 1"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.4306em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"\u03f5"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"="}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,l.jsx)(e.span,{className:"mord",children:"1"})]})]})]}),', while still being complete."']}),"\n","\n",(0,l.jsxs)(e.section,{"data-footnotes":!0,className:"footnotes",children:[(0,l.jsx)(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{id:"user-content-fn-literature-condition-3",children:["\n",(0,l.jsxs)(e.p,{children:["Kaminski writes ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsxs)(e.mrow,{children:[(0,l.jsxs)(e.msub,{children:[(0,l.jsx)(e.mi,{mathvariant:"normal",children:"\u03a6"}),(0,l.jsx)(e.mn,{children:"0"})]}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mi,{children:"I"}),(0,l.jsx)(e.mo,{stretchy:"false",children:")"}),(0,l.jsx)(e.mo,{children:"\u2264"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"["}),(0,l.jsx)(e.mi,{children:"G"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"]"}),(0,l.jsx)(e.mo,{children:"\u22c5"}),(0,l.jsx)(e.mo,{stretchy:"false",children:"("}),(0,l.jsx)(e.mi,{children:"I"}),(0,l.jsx)(e.mo,{children:"\u2212"}),(0,l.jsx)(e.mi,{children:"\u03f5"}),(0,l.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\Phi_0(I) \\leq [G] \\cdot (I - \\epsilon)"})]})})}),(0,l.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mord",children:"\u03a6"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,l.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:"0"})})]})}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,l.jsx)(e.span,{})})})]})})]}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,l.jsx)(e.span,{className:"mclose",children:")"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(e.span,{className:"mrel",children:"\u2264"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"["}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"G"}),(0,l.jsx)(e.span,{className:"mclose",children:"]"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u22c5"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mopen",children:"("}),(0,l.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"I"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(e.span,{className:"mbin",children:"\u2212"}),(0,l.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(e.span,{className:"mord mathnormal",children:"\u03f5"}),(0,l.jsx)(e.span,{className:"mclose",children:")"})]})]})]})," instead for condition 3, where ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsxs)(e.msub,{children:[(0,l.jsx)(e.mi,{mathvariant:"normal",children:"\u03a6"}),(0,l.jsx)(e.mn,{children:"0"})]})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\Phi_0"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,l.jsxs)(e.span,{className:"mord",children:[(0,l.jsx)(e.span,{className:"mord",children:"\u03a6"}),(0,l.jsx)(e.span,{className:"msupsub",children:(0,l.jsxs)(e.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(e.span,{className:"vlist-r",children:[(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.3011em"},children:(0,l.jsxs)(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,l.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,l.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,l.jsx)(e.span,{className:"mord mtight",children:"0"})})]})}),(0,l.jsx)(e.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(e.span,{className:"vlist-r",children:(0,l.jsx)(e.span,{className:"vlist",style:{height:"0.15em"},children:(0,l.jsx)(e.span,{})})})]})})]})]})})]})," is the loop-characteristic function with respect to postexpectation ",(0,l.jsxs)(e.span,{className:"katex",children:[(0,l.jsx)(e.span,{className:"katex-mathml",children:(0,l.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(e.semantics,{children:[(0,l.jsx)(e.mrow,{children:(0,l.jsx)(e.mn,{children:"0"})}),(0,l.jsx)(e.annotation,{encoding:"application/x-tex",children:"0"})]})})}),(0,l.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(e.span,{className:"base",children:[(0,l.jsx)(e.span,{className:"strut",style:{height:"0.6444em"}}),(0,l.jsx)(e.span,{className:"mord",children:"0"})]})})]}),". Our condition is equivalent to this, but simplified. ",(0,l.jsx)(e.a,{href:"#user-content-fnref-literature-condition-3","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function d(s={}){const{wrapper:e}={...(0,i.R)(),...s.components};return e?(0,l.jsx)(e,{...s,children:(0,l.jsx)(o,{...s})}):o(s)}},8453:(s,e,a)=>{a.d(e,{R:()=>t,x:()=>r});var n=a(6540);const l={},i=n.createContext(l);function t(s){const e=n.useContext(i);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function r(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(l):s.components||l:t(s.components),n.createElement(i.Provider,{value:e},s.children)}}}]);