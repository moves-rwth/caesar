// Verification-preserving slicing reveals that we can remove the r = 0 assignment.

@ert
coproc main(init_x: UInt, init_n: UInt, init_r: UInt) -> (x: UInt, n: UInt, r: UInt)
    pre 2 * (init_n - init_x)
    post 0
{
    var prob_choice: Bool
    x = init_x
    n = init_n
    r = init_r
    @invariant(2 * (n - x))
    while x < n {
        @slice_verify {
            prob_choice = flip((1/2))
            if prob_choice {
                r = 0
            } else {
                r = 1
            }
            x = x + r
        }
        tick 1
    }
}
